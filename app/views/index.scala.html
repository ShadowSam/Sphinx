@(userEntities: Array[Object])(teamEntities: Array[Object])(orgEntities: Array[Object])(username: String)
@main("Sphinx: Connecting Projects to People")(username) {
<!-- Main jumbotron for a primary marketing message or call to action -->
<div class="container">
   <div class="row">
      <div class="span4">
         <div class="tabbable">
            <ul class="nav nav-tabs" id="dashTab">
               <li class="active"><a href="#1" data-toggle="tab">My Projects</a></li>
               <li class=""><a href="#2" data-toggle="tab">Team Projects</a></li>
               <li class=""><a href="#3" data-toggle="tab">Projects Across the Firm</a></li>
            </ul>
            <div class="tab-content">

            	<!--  MY PROJECTS  -->
               <div class="tab-pane active" id="1">	
                  <br/>
                  <ul class="thumbnails">
                  <div id="page_container">
            	  <div class="page_navigation"></div>
            	  <ul class="content">
                  @for(field <- userEntities){
                	  <li>
                  <div class="thumbnail">
                     @defining(field.asInstanceOf[com.mongodb.BasicDBObject]){ init=>
                     @defining(init.get("entity").asInstanceOf[com.mongodb.BasicDBObject]){ entity=> 
                     	<div class="entityStateButtons" align="right">

                     		<!-- SUBSCRIBE BUTTON -->
                     		<button 
	                     		title="Subscribe/Unsubscribe"    
	                     		id="tab1-@entity.get("entityType")-@entity.get("entityId")-subscribe"                 		
	                     		type="button" 
	                     		class="btn btn-primary" 
	                     		data-toggle="button" 
	                     		onclick="updateEntitySubscriptionStatus( '@entity.get("entityType")', '@entity.get("entityId")', '@username' )">

                     			<span class="glyphicon glyphicon-bookmark" title="Subscribe/Unsubscribe"></span>
                     		</button>

                     		<!-- VOTE BUTTON -->
                     		<button 
                     			title="Vote/Unvote"
                     			id="tab1-@entity.get("entityType")-@entity.get("entityId")-vote" 
                     			type="button" 
                     			class="btn btn-primary" 
                     			data-toggle="button">

								<span class="glyphicon glyphicon-check" title="Vote/Unvote"></span> 
							</button>

							<!-- WATCH BUTTON -->
							<button 
								title="Watch/Unwatch"
								id="tab1-@entity.get("entityType")-@entity.get("entityId")-watch" 
								type="button" 
								class="btn btn-primary" 
								data-toggle="button">

								<span class="glyphicon glyphicon-eye-open" title="Watch/Unwatch"></span>
							</button>

                   		</div>
                   		<div>
			                 <h3>@entity.get("key")</h3>
		                     <h3>@entity.get("summary")</h3>
		                     <h4>User @{init.get("changedBy")}@{init.get("reportedBy")} has performed a @init.get("eventClass") event!</h4>
		                     <p>@entity.get("key")
		                        <br/> 
		                        @{if (init.containsField("eventDate")){new Date(init.getLong("eventDate"))}}
		                        @{if (init.containsField("reportDate")){new Date(init.getLong("reportDate"))}}		     
		                     </p>
				                     
			                 <a class="btn btn-primary btn-sm" href="./entity?arg=@entity.get("entityId")&entityType=@entity.get("entityType")">Learn more &raquo;</a>
		                     <br/>
	                  	</div>
                        
	                }}</div></li>}</ul></div>
                   	               	  
                  <br/>
               </div>
               <!--  TEAM PROJECTS  -->
	           <div class="tab-pane" id="2">
	              <br/>
	              <ul class="thumbnails">
	              @for(field <- teamEntities){
	              <div class="thumbnail">
	                 @defining(field.asInstanceOf[com.mongodb.BasicDBObject]){ init=>
	                 @defining(init.get("entity").asInstanceOf[com.mongodb.BasicDBObject]){ entity=>
	                 <div class="entityStateButtons" align="right">

                     		<!-- SUBSCRIBE BUTTON -->
                     		<button 
	                     		title="Subscribe/Unsubscribe"    
	                     		id="tab2-@entity.get("entityType")-@entity.get("entityId")-subscribe"                 		
	                     		type="button" 
	                     		class="btn btn-primary" 
	                     		data-toggle="button" 
	                     		onclick="updateEntitySubscriptionStatus( '@entity.get("entityType")', '@entity.get("entityId")', '@username' )">

                     			<span class="glyphicon glyphicon-bookmark" title="Subscribe/Unsubscribe"></span>
                     		</button>

                     		<!-- VOTE BUTTON -->
                     		<button 
                     			title="Vote/Unvote"
                     			id="tab2-@entity.get("entityType")-@entity.get("entityId")-vote" 
                     			type="button" 
                     			class="btn btn-primary" 
                     			data-toggle="button">

								<span class="glyphicon glyphicon-check" title="Vote/Unvote"></span> 
							</button>

							<!-- WATCH BUTTON -->
							<button 
								title="Watch/Unwatch"
								id="tab2-@entity.get("entityType")-@entity.get("entityId")-watch" 
								type="button" 
								class="btn btn-primary" 
								data-toggle="button">

								<span class="glyphicon glyphicon-eye-open" title="Watch/Unwatch"></span>
							</button>

                   	 </div>
                   	 <div>
		                 <h3>@entity.get("summary")</h3>
		                 <h4>User @{init.get("changedBy")}@{init.get("reportedBy")} has performed a @init.get("eventClass") event!</h4>
		                 <p>@entity.get("key")
		                    <br/> 
								@{if (init.containsField("eventDate")){new Date(init.getLong("eventDate"))}}
		                        @{if (init.containsField("reportDate")){new Date(init.getLong("reportDate"))}}
		                 </p>
		                 <a class="btn btn-primary btn-sm" href="./entity?arg=@entity.get("entityId")&entityType=@entity.get("entityType")">Learn more &raquo;</a>
		             </div>
                   </div>
	                 }
	                 }
	                 
	              
	              <br/>
	              }                   	  
	              <br/>
	           </div>
	           <!--  PROJECTS FROM ACROSS THE FIRM  -->
	           <div class="tab-pane" id="3">
	              <br/>
	              <ul class="thumbnails">
	              @for(field <- orgEntities){
	              <div class="thumbnail">
	                 @defining(field.asInstanceOf[com.mongodb.BasicDBObject]){ init=>
	                 @defining(init.get("entity").asInstanceOf[com.mongodb.BasicDBObject]){ entity=>
	                 <div class="entityStateButtons" align="right">

                     		<!-- SUBSCRIBE BUTTON -->
                     		<button 
	                     		title="Subscribe/Unsubscribe"    
	                     		id="tab3-@entity.get("entityType")-@entity.get("entityId")-subscribe"                 		
	                     		type="button" 
	                     		class="btn btn-primary" 
	                     		data-toggle="button" 
	                     		onclick="updateEntitySubscriptionStatus( '@entity.get("entityType")', '@entity.get("entityId")', '@username' )">

                     			<span class="glyphicon glyphicon-bookmark" title="Subscribe/Unsubscribe"></span>
                     		</button>

                     		<!-- VOTE BUTTON -->
                     		<button 
                     			title="Vote/Unvote"
                     			id="tab3-@entity.get("entityType")-@entity.get("entityId")-vote" 
                     			type="button" 
                     			class="btn btn-primary" 
                     			data-toggle="button">

								<span class="glyphicon glyphicon-check" title="Vote/Unvote"></span> 
							</button>

							<!-- WATCH BUTTON -->
							<button 
								title="Watch/Unwatch"
								id="tab3-@entity.get("entityType")-@entity.get("entityId")-watch" 
								type="button" 
								class="btn btn-primary" 
								data-toggle="button">

								<span class="glyphicon glyphicon-eye-open" title="Watch/Unwatch"></span>
							</button>

				     </div>
				     <div>
		                 <h3>@entity.get("summary")</h3>
		                 <h4>User @{init.get("changedBy")}@{init.get("reportedBy")} has performed a @init.get("eventClass") event!</h4>
		                 <p>@entity.get("key")
		                    <br/> 
							@{if (init.containsField("eventDate")){new Date(init.getLong("eventDate"))}}
		                        @{if (init.containsField("reportDate")){new Date(init.getLong("reportDate"))}}
		                 </p>
		                 <a class="btn btn-primary btn-sm" href="./entity?arg=@entity.get("entityId")&entityType=@entity.get("entityType")">Learn more &raquo;</a>
		             </div>
	                 }
	                 }
	                 
	              </div>
	              <br/>
	              }                   	  
	              <br/>
	           </div>
         	   <!--  MY SUBSCRIPTIONS  -->
         	   <!--  <div class="tab-pane" id="4">
	              <br/>
	              <ul class="thumbnails">
	              </ul>
	           </div> -->
         	</div>
     	</div>
      </div>
   </div>
</div>
<hr>
<footer>
   <p>&copy; Team Venture</p>
</footer>
</div> <!-- /container -->

<script>
$('#dashTab a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
});

// store the currently selected tab in the hash value
$("ul.nav-tabs > li > a").on("shown.bs.tab", function (e) {
    var id = $(e.target).attr("href").substr(1);
    window.location.hash = id;
});

// on load of the page: switch to the currently selected tab
var hash = window.location.hash;
$('#dashTab a[href="' + hash + '"]').tab('show');
</script>

<script type="text/javascript">
$(document).ready(function(){
	$('#page_container').pajinate({
	items_per_page : 1
	});
});
 
</script>


}