@(initiative: Initiative)(username: String)(children: List[Entity])(entityComments: List[Comment]) 
@main("Sphinx: Connecting Projects to People")("") {

<div class="thumbnail">
	@defining(initiative.asInstanceOf[Initiative]){ init=>
	<div class="entityStateButtons" align="right">

		<!-- SUBSCRIBE BUTTON -->
		<button 
		title="Subscribe/Unsubscribe"
		name='subscription_b-@init.getEntityType()-@init.getEntityId()'
		type="button" 
		class="" 
		data-toggle="button"
		onclick="updateEntityStateStatus( '@init.getEntityType()', '@init.getEntityId()', '@username', 'subscription' )">

		<span class="glyphicon glyphicon-heart"
		title="Subscribe/Unsubscribe"></span>

	</button>

	<!-- VOTE BUTTON -->
	<button 
	title="Vote/Unvote"
	name='vote_b-@init.getEntityType()-@init.getEntityId()'
	type="button" 
	class="" 
	data-toggle="button"
	onclick="updateEntityStateStatus( '@init.getEntityType()', '@init.getEntityId()', '@username', 'vote' )">

	<span class="glyphicon glyphicon-check" title="Vote/Unvote"></span>

</button>

<!-- WATCH BUTTON -->
<button 
title="Watch/Unwatch"
name='watch_b-@init.getEntityType()-@init.getEntityId()'
type="button" 
class="btn btn-primary" 
data-toggle="button"
onclick="updateEntityStateStatus( '@init.getEntityType()', '@init.getEntityId()', '@username', 'watch' )">

<span class="glyphicon glyphicon-eye-open"
title="Watch/Unwatch"></span>

</button>

<script>
	setStatusOfAllButtons(
		'@init.getEntityType()',
		'@init.getEntityId()',
		'@username')
</script>

</div>

<div>
	<h1>
		Key: @init.getKey() <br /> Summary: @init.getSummary()
	</h1>
	<h2>Description: @init.getDescription()</h2>


	<h3>
		Entity Type: @init.getEntityType() <br /> Project Type:
		@init.getProjectType() <br /> Labels: @init.getLabels()
	</h3>


	<h4>
		Assignee: @init.getAssignee() <br /> Reporter: @init.getReporter() <br />
		Watchers: @init.getWatchers() <br /> Provider Groups:
		@init.getProviderGroups() <br />
	</h4>


	<h4>
		Business Groups: @init.getBusinessGroups() <br /> Business Owner:
		@init.getBusinessOwner() <br /> Business Unit:
		@init.getBusinessUnit() <br />
	</h4>


	<h4>
		Priority: @init.getPriority() <br /> Status: @init.getStatus() <br />
		Complexity: @init.getComplexity() <br /> Health: @init.getHealth()
	</h4>


	<h4>
		Created: @{init.getFormattedDate(new Date(init.getCreated()))} <br /> Start Date: @{init.getFormattedDate(new
		Date(init.getStartDate()))} <br /> Desired Due Date: @{init.getFormattedDate(new
		Date(init.getDesiredDueDate()))} <br /> Desired Start Date: @{init.getFormattedDate(new
		Date(init.getDesiredStartDate()))} <br /> Due Date: @{init.getFormattedDate(new
		Date(init.getDueDate()))} <br /> Updated: @{init.getFormattedDate(new
		Date(init.getUpdated()))}
	</h4>

	<h4>
		Business Goals: @init.getBusinessGoals() <br /> Verification Steps:
		@init.getVerificationSteps()
	</h4>

	@if(init.getWorkBreakdownParent != null){
	<h4>
		Work Breakdown Parent:
		<br/>
		
		@defining(init.getWorkBreakdownParent.asInstanceOf[Entity]){ WBP=> <a
		href="./entity?arg=@WBP.getEntityId()&entityType=@WBP.getEntityType()">@WBP.getEntityId()</a> }

	</h4>
}

@if(children.size() != 0){
<h4>Entity Children:</h4>
@for(child <- children){


<a
href="./entity?arg=@child.getEntityId()&entityType=@child.getEntityType()">@child.getSummary()</a>
<br/>


}
}
</div>

</h4>

</div>

<!-- Modal -->
<div class="modal fade" id="modal" tabindex="-1" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="modal-label"></h4>
			</div>
			<div class="modal-body" id="modal-body">
				<div id="modal-body-text"></div>

				<div id="modal-form"></div>
			</div>
			<div class="modal-footer" id="modal-footer">
				<button type="button" id="modal-button1" class="" data-dismiss="modal"></button>
				<button type="button" id="modal-button2" class="" data-dismiss="modal" onclick=""></button>
			</div>
		</div>
	</div>
</div>

<!--Entity Comments-->

<h1>Initiative Comments:<br></h1>	
<div class="modal fade" id="commentModal" tabindex="-1" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="commentModal-label"></h4>
			</div>

			<div class="modal-body" id="commentModal-body">
				<div id="commentModal-body-text"></div>

				<div id="dialogComment-form">
					<form>
						<label>Comment Header</label>
						<input type="text" name="commentHeader" id="commentHeader" class="text ui-widget-content ui-corner-all">
						<label>Comment Body</label>
						<input type="text" name="comment" id="comment" class="text ui-widget-content ui-corner-all">
					</form>
				</div>
			</div>

			<div class="modal-footer" id="commentModal-footer">
				<button type="button" id="commentModal-button1" class="" data-dismiss="modal"></button>
				<button type="button" id="commentModal-button2" class="" data-dismiss="modal" onclick=""></button>
			</div>

		</div>
	</div>
</div>
<!--<div id="dialog-form" title="Post New Comment">
	<p class="validateTips">All fields are required.</p>

	<form>
		<fieldset>
			<label>Comment Header</label>
			<input type="text" name="commentHeader" id="commentHeader" class="text ui-widget-content ui-corner-all">
			<label>Comment Body</label>
			<input type="text" name="comment" id="comment" class="text ui-widget-content ui-corner-all">
		</fieldset>
	</form>

</div> -->

<button id="create-comment" 
class="btn btn-primary btn-sm"
data-toggle="modal" 
data-target="#modal" 
onclick="setCommentBox_New('@initiative.getEntityType()', '@initiative.getEntityId()','@username')">Post New Comment
</button>

<div id ="entity-comments">
	<ul class="content">
		<div id ="comment-container" class="pcontainer">
			@for(comment <- entityComments){
			<div>
				<li>
					<div class="thumbnail">
						<div id = "user-comments">
							@if(comment.getCreatedBy() == username){
							<div class="optionButtons" align = "right">
								<button 
								class="btn btn-primary btn-sm"
								data-toggle="modal"
								data-target="#modal"
								onclick="setCommentBox_Edit()">Edit
							</button>
							<button 
							class="btn btn-primary btn-sm"
							data-toggle="modal"
							data-target="#modal"
							onclick="setCommentBox_Delete()">Delete
						</button>
					</div>
				}
				<p>@comment.getCommentBody()</p>
				posted by @comment.getCreatedBy()
				<!--add timestamp-->
			</div>
		</div>
	</li>
</div>
}
</div>
</ul>
</div>
}
}
